<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>22 Revisions | LoRa 中文资料汇编</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="LoRa 中文资料汇编。包含 LoRaWAN 1.1 Spec 中文版（翻译）等。持续更新。">
    <link rel="preload" href="/assets/css/0.styles.f1e15b89.css" as="style"><link rel="preload" href="/assets/js/app.741f693f.js" as="script"><link rel="preload" href="/assets/js/2.1bc0aca8.js" as="script"><link rel="preload" href="/assets/js/36.5bcbb7cf.js" as="script"><link rel="prefetch" href="/assets/js/10.23e15bef.js"><link rel="prefetch" href="/assets/js/11.a713a811.js"><link rel="prefetch" href="/assets/js/12.2c5eaff8.js"><link rel="prefetch" href="/assets/js/13.3bb3f94d.js"><link rel="prefetch" href="/assets/js/14.e1b9814b.js"><link rel="prefetch" href="/assets/js/15.fe1b5100.js"><link rel="prefetch" href="/assets/js/16.d147badc.js"><link rel="prefetch" href="/assets/js/17.b6bf6b8e.js"><link rel="prefetch" href="/assets/js/18.106ab12b.js"><link rel="prefetch" href="/assets/js/19.9dc7d0a2.js"><link rel="prefetch" href="/assets/js/20.e7085fe8.js"><link rel="prefetch" href="/assets/js/21.82911863.js"><link rel="prefetch" href="/assets/js/22.f46bb411.js"><link rel="prefetch" href="/assets/js/23.f1dc8101.js"><link rel="prefetch" href="/assets/js/24.b81b8f52.js"><link rel="prefetch" href="/assets/js/25.7d1c55c4.js"><link rel="prefetch" href="/assets/js/26.f0bc4c51.js"><link rel="prefetch" href="/assets/js/27.ec545f01.js"><link rel="prefetch" href="/assets/js/28.fc678aa5.js"><link rel="prefetch" href="/assets/js/29.d3d2abd9.js"><link rel="prefetch" href="/assets/js/3.b10d7aa1.js"><link rel="prefetch" href="/assets/js/30.cb8ae1c3.js"><link rel="prefetch" href="/assets/js/31.bae2fa66.js"><link rel="prefetch" href="/assets/js/32.a34e5210.js"><link rel="prefetch" href="/assets/js/33.6c61b41f.js"><link rel="prefetch" href="/assets/js/34.22d3b341.js"><link rel="prefetch" href="/assets/js/35.5937a0a7.js"><link rel="prefetch" href="/assets/js/37.62d46c8e.js"><link rel="prefetch" href="/assets/js/38.a598cd4c.js"><link rel="prefetch" href="/assets/js/4.ad227c3b.js"><link rel="prefetch" href="/assets/js/5.b8c308d4.js"><link rel="prefetch" href="/assets/js/6.962b3fa9.js"><link rel="prefetch" href="/assets/js/7.45f46359.js"><link rel="prefetch" href="/assets/js/8.5b174735.js"><link rel="prefetch" href="/assets/js/9.2c49762f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f1e15b89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LoRa 中文资料汇编</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/deltacat/lora-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/deltacat/lora-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/lorawan-v1.1/" class="sidebar-heading clickable router-link-active"><span>LoRaWAN 1.1 规范</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lorawan-v1.1/ch01.html" class="sidebar-link">第1章 介绍</a></li><li><a href="/lorawan-v1.1/ch02.html" class="sidebar-link">第2章 LoRaWAN 选型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/lorawan-v1.1/CLASS-A" class="sidebar-heading clickable"><span>CLASS A</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lorawan-v1.1/ch03.html" class="sidebar-link">第3章 物理消息格式</a></li><li><a href="/lorawan-v1.1/ch04.html" class="sidebar-link">第4章 MAC 帧格式</a></li><li><a href="/lorawan-v1.1/ch05.html" class="sidebar-link">第5章 MAC 指令</a></li><li><a href="/lorawan-v1.1/ch06.html" class="sidebar-link">第6章 终端激活</a></li><li><a href="/lorawan-v1.1/ch07.html" class="sidebar-link">第7章 重传避让</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/lorawan-v1.1/CLASS-B" class="sidebar-heading clickable"><span>CLASS B</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lorawan-v1.1/ch08.html" class="sidebar-link">第8章 Class B 介绍</a></li><li><a href="/lorawan-v1.1/ch09.html" class="sidebar-link">第9章 下行同步网络的原理</a></li><li><a href="/lorawan-v1.1/ch10.html" class="sidebar-link">第10章 Class B 模式的上行帧</a></li><li><a href="/lorawan-v1.1/ch11.html" class="sidebar-link">第11章 下行 Ping 帧格式（Class B选项）</a></li><li><a href="/lorawan-v1.1/ch12.html" class="sidebar-link">第12章 信标的获得和追踪</a></li><li><a href="/lorawan-v1.1/ch13.html" class="sidebar-link">第13章 Class B下行时隙时序</a></li><li><a href="/lorawan-v1.1/ch14.html" class="sidebar-link">第14章 Class B Mac命令</a></li><li><a href="/lorawan-v1.1/ch15.html" class="sidebar-link">第15章 信标（Class B选项)</a></li><li><a href="/lorawan-v1.1/ch16.html" class="sidebar-link">第16章 Class B 单播/多播下行信道频率</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/lorawan-v1.1/CLASS-C" class="sidebar-heading clickable"><span>CLASS C</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lorawan-v1.1/ch17.html" class="sidebar-link">第17章 持续接收的终端</a></li><li><a href="/lorawan-v1.1/ch18.html" class="sidebar-link">第18章 Class C MAC 指令</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/lorawan-v1.1/SUPPORT" class="sidebar-heading clickable open"><span>SUPPORT INFORMATION</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lorawan-v1.1/ch19.html" class="sidebar-link">19 Examples and Application Information</a></li><li><a href="/lorawan-v1.1/ch20.html" class="sidebar-link">20 Recommendation on contract to be provided to the Network Server by the end-device provider at the time of provisioning</a></li><li><a href="/lorawan-v1.1/ch21.html" class="sidebar-link">21 Recommendation on finding the locally used channels</a></li><li><a href="/lorawan-v1.1/ch22.html" aria-current="page" class="active sidebar-link">22 Revisions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lorawan-v1.1/ch22.html#_22-1-revision-1-0" class="sidebar-link">22.1 Revision 1.0</a></li><li class="sidebar-sub-header"><a href="/lorawan-v1.1/ch22.html#_22-2-revision-1-0-1" class="sidebar-link">22.2 Revision 1.0.1</a></li><li class="sidebar-sub-header"><a href="/lorawan-v1.1/ch22.html#_22-3-revision-1-0-2" class="sidebar-link">22.3 Revision 1.0.2</a></li><li class="sidebar-sub-header"><a href="/lorawan-v1.1/ch22.html#_22-4-revision-1-1" class="sidebar-link">22.4 Revision 1.1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lorawan-v1.1/ch22.html#_22-4-1-clarifications" class="sidebar-link">22.4.1 Clarifications</a></li><li class="sidebar-sub-header"><a href="/lorawan-v1.1/ch22.html#_22-4-2-functional-modifications" class="sidebar-link">22.4.2 Functional modifications</a></li><li class="sidebar-sub-header"><a href="/lorawan-v1.1/ch22.html#_22-4-3-examples" class="sidebar-link">22.4.3 Examples</a></li></ul></li></ul></li><li><a href="/lorawan-v1.1/ch23.html" class="sidebar-link">23 术语表</a></li><li><a href="/lorawan-v1.1/ch24.html" class="sidebar-link">24 Bibliography</a></li><li><a href="/lorawan-v1.1/ch25.html" class="sidebar-link">25 NOTICE OF USE AND DISCLOSURE</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lorawan-v1.1/appendix" class="sidebar-heading clickable"><span>附录</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_22-revisions"><a href="#_22-revisions" class="header-anchor">#</a> 22 Revisions</h1> <h2 id="_22-1-revision-1-0"><a href="#_22-1-revision-1-0" class="header-anchor">#</a> 22.1 Revision 1.0</h2> <ul><li>Approved version of LoRaWAN1.0</li></ul> <h2 id="_22-2-revision-1-0-1"><a href="#_22-2-revision-1-0-1" class="header-anchor">#</a> 22.2 Revision 1.0.1</h2> <ul><li>Clarified the RX window start time definition</li> <li>Corrected the maximum payload size for DR2 in the NA section</li> <li>Corrected the typo on the downlink data rate range in 7.2.2</li> <li>Introduced a requirement for using coding rate 4/5 in 7.2.2 to guarantee a maximum time on air &lt; 400mSec</li> <li>Corrected the Join-accept MIC calculation in 6.2.5</li> <li>Clarified the NbRep field and renamed it to NbTrans in 5.2</li> <li>Removed the possibility to not encrypt the Applicative payload in the MAC layer, removed the paragraph 4.3.3.2. If further security is required by the application, the payload will be encrypted, using any method, at the application layer then re-encrypted at the MAC layer using the specified default LoRaWAN encryption</li> <li>Corrected FHDR field size typo</li> <li>Corrected the channels impacted by ChMask when chMaskCntl equals 6 or 7 in 7.2.5</li> <li>Clarified 6.2.5 sentence describing the RX1 slot data rate offset in the JoinResp message</li> <li>Removed the second half of the DRoffset table in 7.2.7 , as DR&gt;4 will never be used for uplinks by definition</li> <li>Removed explicit duty cycle limitation implementation in the EU868Mhz ISM band (chapter7.1)</li> <li>Made the RXtimingSetupAns and RXParamSetupAns sticky MAC commands to avoid end-device’s hidden state problem. (in 5.4 and 5.7)</li> <li>Added a frequency plan for the Chinese 470-510MHz metering band</li> <li>Added a frequency plan for the Australian 915-928MHz ISM band</li></ul> <h2 id="_22-3-revision-1-0-2"><a href="#_22-3-revision-1-0-2" class="header-anchor">#</a> 22.3 Revision 1.0.2</h2> <ul><li>Extracted section 7 “Physical layer” that will now be a separated document“LoRaWAN regional physical layers definition”</li> <li>corrected the ADR_backoff sequence description (ADR_ACK_LIMT was written instead of ADR_ACK_DELAY) paragraph 4.3.1.1</li> <li>Corrected a formatting issue in the title of section 18.2 (previously section 19.2 in the 1.0.1 version)</li> <li>Added the DlChannelRec MAC command, this command is used to modify the frequency at which an end-device expects a downlink.</li> <li>Added the Tx ParamSetupRec MAC command. This command enables to remotelymodify the maximum TX dwell time and the maximum radio transmit power of a device in certain regions</li> <li>Added the ability for the end-device to process several ADRreq commands in a single block in 5.2</li> <li>Clarified AppKey definitionIntroduced the ResetInd / ResetConf MAC commands</li> <li>Split Data rate and txpower table in 7.1.3 for clarity</li> <li>Added DeviceTimeReq/Ans MAC command to class A</li> <li>Changed Class B time origin to GPS epoch, added BeaconTimingAns description</li> <li>Aligned all beacons of class B to the same time slot. Class B beacon is now common to all networks.</li> <li>Separated AppKey and NwkKey to independently derive AppSKeys and NetSKeys.</li> <li>Separated NetSKeyUp and NetSKeyDnw for roaming</li></ul> <h2 id="_22-4-revision-1-1"><a href="#_22-4-revision-1-1" class="header-anchor">#</a> 22.4 Revision 1.1</h2> <p>This section provides an overview of the main changes happening between LoRaWAN1.1 and LoRaWAN1.0.2.</p> <h3 id="_22-4-1-clarifications"><a href="#_22-4-1-clarifications" class="header-anchor">#</a> 22.4.1 Clarifications</h3> <ul><li>Grammatical</li> <li>Normative text used consistently</li> <li>ADR behavior,
<ul><li>Introduced the concept of ADR command block processing</li> <li>TXPower handling</li> <li>Default channel re-enabling</li> <li>ADR Backoff behavior</li></ul></li> <li>Default TXPower definition</li> <li>FCnt shall never be reused with the same session keys</li> <li>MAC Commands are discarded if present in both FOpts and Payload</li> <li>Retransmission backoff clarification</li></ul> <h3 id="_22-4-2-functional-modifications"><a href="#_22-4-2-functional-modifications" class="header-anchor">#</a> 22.4.2 Functional modifications</h3> <ul><li>FCnt changes
<ul><li>All counters are 32bits wide, 16bits not supported any more</li> <li>Separation of FCntDown into AFCntDown and NFCntDown
<ul><li>Remove state synchronization requirement from NS/AS</li></ul></li> <li>Remove requirement to discard frames if FCnt gap is greater than MAX_FCNT_GAP
<ul><li>Unnecessary with 32bit counters</li></ul></li> <li>End-device Frame counters are reset upon the successful processing of a Join-Accep</li> <li>ABP device must never reset frame counters</li></ul></li> <li>Retransmission (transmission without incrementing the FCnt)
<ul><li>Downlink frames are never retransmitted</li> <li>Subsequent receptions of a frame with the same FCnt are ignored</li> <li>Uplink retransmissions are controlled by NbTrans (this includes both confirmed and unconfirmed frames)</li> <li>A retransmission may not occur until both RX1 and RX2 receive windows have expired</li> <li>Class B/C devices cease retransmitting a frame upon the reception of a frame in the RX1 window</li> <li>Class A device cease retransmitting a frame upon the reception of a frame in either the RX1 or RX2 window</li></ul></li> <li>Key changes
<ul><li>Added one new root key (separation of cipher function)
<ul><li>NwkKey and AppKey</li></ul></li> <li>Added new session keys
<ul><li>NwkSEncKey encrypts payloads where Fport = 0 (MAC command payload)</li> <li>AppSKey encrypts payloads where Fport != 0 (Application payloads)</li> <li>NwkSIntKey is used to MIC downlink frames
<ul><li>For downlinks with the ACK bit set, the 2 LSBs of the AFCntUp of the confirmed uplink which generated the ACK are added to the MIC calculation</li></ul></li></ul></li> <li>SNwkSIntKey and FNwkSIntKey are used to MIC uplink frames
<ul><li>Each is used to calculate 2 separate 16 bit MICs which are combined to a single 32 bit MIC</li> <li>The SNwkSIntKey portion is considered &quot;private&quot; and not shared with a roaming fNs</li> <li>The FNwkSIntKey portion is considered &quot;public&quot; and may be shared with a roaming fNs</li> <li>The private MIC portion now uses the TxDr, TxCh</li> <li>For uplinks with the ACK bit set, the 2 LSBs of the FCntDown of the confirmed downlink which generated the ACK are added to the private MIC calculation</li></ul></li> <li>Keys fully defined later (section 6)</li> <li>Associated MIC and Encrypt changes using new keys</li></ul></li> <li>MAC Commands introduced
<ul><li>TxParamSetupReq/Ans</li> <li>DlChannelReq/Ans</li> <li>ResetInd/Conf</li> <li>ADRParamSetupReq/Ans</li> <li>DeviceTimeReq/Ans</li> <li>ForceRejoinReq</li> <li>RejoinParamSetupReq/Ans</li> <li>For the linkADRReq command
<ul><li>Value of 0xF is to be ignored for DR or TXPower</li> <li>Value of 0 is to be ignored for NbTrans</li></ul></li></ul></li> <li>Activation
<ul><li>JoinEUI replaces AppEUI (clarification)</li> <li>EUI's fully defined</li> <li>Root keys defined
<ul><li>NwkKey</li> <li>AppKey</li></ul></li> <li>Additional session keys added (split MIC/Encrypt keys)
<ul><li>SNwkSIntKeyUp and FNwkSIntKeyUp (split-MIC uplink)</li> <li>NwkSIntKeyDown (MIC downlink)</li> <li>NwkSEncKey (Encrypt up/down)</li> <li>JSIntKey (Rejoin-Request and related Join-Accept)</li> <li>JSencKey (Join-Accepts in response to Rejoin-Request)</li></ul></li> <li>Session context defined</li></ul></li> <li>OTAA
<ul><li>JoinAccept MIC modified to prevent replay attack</li> <li>Session key derivation defined</li> <li>ReJoin-Request messages defined (one new LoRaWAN Message type [MType]
<ul><li>0 - Handover roaming assist</li> <li>1 - Backend state recovery assist</li> <li>2 - Rekey session keys</li></ul></li> <li>All Nonces are now counters (not random any more)</li> <li>NetId clarified (association with Home Network)</li> <li>OptNeg bit defined in Join-Accept to identify 1.0 or 1.1+ operational version of network backend
<ul><li>1.0 operation reversion by a 1.1 device defined</li></ul></li></ul></li> <li>ABP
<ul><li>Additional Session key requirement described</li></ul></li> <li>Class B
<ul><li>Network now controls the device’s DR</li> <li>Beacon definition moved to Regional document</li> <li>Clarifications</li> <li>Deprecated the BeaconTimingReq/Ans (replaced by the standard MAC command DeviceTimeReq/Ans)</li></ul></li> <li>Class C
<ul><li>Clarify requirement for a DL timeout</li> <li>Add Class C MAC Commands
<ul><li>DeviceModeInd/Conf</li></ul></li></ul></li></ul> <h3 id="_22-4-3-examples"><a href="#_22-4-3-examples" class="header-anchor">#</a> 22.4.3 Examples</h3> <ul><li>Removed aggressive data-rate backoff example during retransmissionLoRaWAN 1.1 Specificati</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/deltacat/lora-docs/edit/master/docs/lorawan-v1.1/ch22.md" target="_blank" rel="noopener noreferrer">帮我改善此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近更新:</span> <span class="time">9/14/2019, 11:07:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lorawan-v1.1/ch21.html" class="prev">
        21 Recommendation on finding the locally used channels
      </a></span> <span class="next"><a href="/lorawan-v1.1/ch23.html">
        23 术语表
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.741f693f.js" defer></script><script src="/assets/js/2.1bc0aca8.js" defer></script><script src="/assets/js/36.5bcbb7cf.js" defer></script>
  </body>
</html>
