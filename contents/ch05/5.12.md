### 5.12 设备时间指令（***DeviceTimeReq***，***DeviceTimeAns***）

此 MAC 指令仅适用于在兼容 LoRaWAN1.1 的网络服务器上激活的 OTA 设备。LoRaWAN1.0 服务器没有实现这个 MAC 指令。

使用 ***DeviceTimeReq*** 命令，终端设备可以从网络请求当前网络日期和时间。该请求没有载荷。

使用 ***DeviceTimeAns*** 命令，网络服务器向终端设备提供网络日期和时间。所提供的时间是上行传输结束时捕获的网络时间。该命令的有效负载为 5 字节，定义如下:


<table class="lora-table">
   <tr>
      <td><b>Size (bytes)</b></td>   
      <td>4</td>   
      <td>1</td>   
   </tr>
   <tr>
      <td><b>DeviceTimeAns Payload</b></td>
      <td>32-bit unsigned integer : Seconds since epoch*</td>
      <td>8bits unsigned integer: fractional- second in 1⁄2^8 second steps</td>
   </tr>
</table>  

*图 39：DeviceTimeAns payload format*


网络提供的时间必须（MUST）具备 +/-100mSec 的最坏情况精度。

（*）GPS纪元（即1月6日星期日午夜）被用作原点。“seconds”字段是自原点起经过的秒数。这个字段每秒增加1。要将此字段转换为UTC时间，必须考虑闰秒。

>Example: Friday 12th of February 2016 at 14:24:31 UTC corresponds to 1139322288 seconds since GPS epoch. As of June 2017, the GPS time is 17seconds ahead of UTC time.

