### 5.14 ***RejoinParamSetupReq***，***RejoinParamSetupAns***

使用 ***RejoinParamSetupReq*** 命令，网络可以请求设备周期性地发送 RejoinReq Type 0 消息，其可编程周期可以为一段时间或若干上行通信。

使用时间和计数两种方法是为了处理可能没有时间测量能力的器件。指定的周期设定两个 RejoinReq 传输之间的最大上行时间或上行次数。设备可以（MAY）更频繁地发送 RejoinReq。

该指令有一个单字节载荷：

<table class="lora-table">
   <tr>
      <td><b>Bits</b></td>   
      <td>7:4</td>   
      <td>3:0</td>   
   </tr>
   <tr>
      <td><b>RejoinParamSetupReq bits</b></td>
      <td>MaxTimeN</td>
      <td>MaxCountN</td>
   </tr>
</table>  

*图 41 : RejoinParamSetupReq payload format*

参数定义如下：

MaxCountN = C = 0 to 15；设备必须（MUST）至少每2^(C+4) 次上行消息发送一次 Rejoin-Request type 0。
MaxTimeN = T = 0 to 15；设备（必须）至少每 2^(T+10) 秒发送一次 Rejoin-request type 0。

- T = 0 大约相当于 17 分钟
- T = 15 大约 1 年

每当满足这两个条件（帧数或时间）之一时，就会发送一个 RejoinReq 包。

The device MUST implement the uplink count periodicity. Time based periodicity is OPTIONAL. A device that cannot implement time limitation MUST signal it in the answer。

设备必须（MUST）实现计数方式的周期。基于时间的周期是可选的。不能实现时间周期的设备必须在回应中发出信号。

回应有一个单字节载荷：

<table class="lora-table">
   <tr>
      <td><b>Bits</b></td>   
      <td>7:1</td>   
      <td>0</td>   
   </tr>
   <tr>
      <td><b>Status bits</b></td>
      <td>RFU</td>
      <td>TimeOK</td>
   </tr>
</table>  

*图 42 : RejoinParamSetupAns payload format*

如果 Bit 0 = 1，设备接受计时和计次。否则它仅接受计次。

>注意：对于消息速率非常低且没有时间测量能力的设备，LoRaWAN 中没有指定就最佳计数限制达成一致的机制。

