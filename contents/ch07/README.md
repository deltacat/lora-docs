## **第7章 重传退避**

上行帧如下面这样：

- 需要网络或者应用服务器进行确认或者应答时，如果超时没有接收到，终端需要进行重传。

同时，

- 某些外部事件（断电，无线电干扰，网络断电，地震），将会导致大量的（>100）的设备出现同一时间上行的行为。

这样可能会引发灾难性的、持久的、射频网络过载的情况。

> 注意：这种上行帧的一个典型例子是 JoinRequest，当发生网络中断时，一组终端将会复位 MAC 层。

> 这一组的终端将会开始广播 JoinRequest 上行帧，只有当从网络中接收到 JoinResponse 命令时才会停止。

对于这些数据帧的重传，RX2时隙的末端和下一个上行帧的重传间隔应该是随机的，并且每个终端遵循不同的顺序（例如使用设备地址作为伪随机生成器的种子）。这些消息的发射占空比，要根据当地的参数要求，以及如下的限定，取二者中更严格的一个限定。

<table>
    <tr>
        <td>在上电或者复位后的第1个小时</td>
        <td>T0 &lt; t &lt; T0+1h</td>
        <td>发射时间 &lt; 36秒</td>
    </tr>
    <tr>
        <td>在接下来的10小时</td>
        <td>T0+1 &lt; t &lt; T0+11h</td>
        <td>发射时间 &lt; 36秒</td>
    </tr>
    <tr>
        <td>前11小时后的24小时</td>
        <td>T0+11+N &lt; t &lt; T0+35+N，N>=0</td>
        <td>发射时间 &lt; 8.7秒/24小时</td>
    </tr>
</table>



