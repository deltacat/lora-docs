
### 6.3 个性化激活 ABP

个性化激活直接将终端设备连接到特定的网络，绕过 **Join-Request - Join-Accept** 过程。

通过个性化激活终端设备意味着 **DevAddr** 和四个会话密钥 **FNwkSIntKey**、**SNwkSIntKey**、**NwkSEncKey** 及 **AppSKey** 直接存储在终端设备中，而不是在连接过程中从 **DevEUI**、**JoinEUI**、**AppKey** 及 **NwkKey** 派生。终端设备一旦启动，就配备了参与特定 LoRa 网络所需的信息。

每个设备都应（SHALL）有一组独特的 **F/SNwkSIntKey**、**NwkSEncKey** 和 **AppSKey**。泄露任何一个设备的密钥不得（SHALL NOT）危害其他设备的通信安全。构建这些密钥的过程应（SHALL）确保密钥不能以任何方式从公开可用的信息派生（例如节点地址或终端设备的 devEUI）。

当个性化终端设备首次访问网络或重新初始化之后，它应（SHALL）在所有上行消息的 FOpt 字段中发送 ***ResetInd*** MAC 指令，直到从网络接收到 ***ResetConf*** 指令。重新初始化后，终端设备必须（MUST）使用其默认配置（标识设备首次连接到网络时使用的配置）。

>**注意：**帧计数器值应（SHALL）在CCM*操作模式下对同一秘钥的所有调用中仅使用一次。因此，禁止重新初始化 ABP 模式终端设备的帧计数器。ABP 设备必须（MUST）使用非易失性内存来存储帧计数器。
>ABP 设备在其整个生命周期使用相同会话秘钥（即，不可能秘钥更新）。因此，建议将 OTAA 设备用于更高安全性要求的应用程序。

