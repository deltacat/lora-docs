### 14.1 PingSlotInfoReq

使用 ***PingSlotInfoReq*** 命令，终端设备通知服务器它的单播 ping slot 周期。此命令只能用于通知服务器**单播** ping slot 的周期性。多播插槽完全由应用程序定义，不应该使用此命令。

<table class="lora-table">
   <tr>
      <td><b>Size(bytes)</b></td>
      <td>1</td>
   </tr>
   <tr>
      <td><b>PingSlotInfoReq Payload</b></td>
      <td>PingSlotParam</td>
   </tr>
</table>

*Figure 54 : PingSlotInfoReq payload format*

<table class="lora-table">
   <tr>
      <td><b>Bit#</b></td>
      <td>7:3</td>
      <td>[2:0]</td>
   </tr>
   <tr>
      <td><b>PingSlotParam</b></td>
      <td>RFU</td>
      <td>Periodicity</td>
   </tr>
</table>

**Periodicity** 子字段是一个无符号3位整数，用于编码终端当前使用的 ping 时隙周期，使用如下等式:

$$pingNb = 2^{7-Periodicity}$$
和
$$pingPeriod = 2^{5+Periodicity}$$

实际的 ping 时隙周期就等于 0.96×2^Periodicity 秒

- Periodicity = 0 表示终端在 beacon_window 间隔期间大约每秒打开一个 ping 时隙。
- Periodicity = 7 表示终端每 128 秒打开一个 ping 时隙，这是 LoRaWAN Class B 所支持的最大 ping 时隙周期。

当终端需要改变 ping 时隙周期以及数据率时，需要先恢复到 Class A 模式，在发送 ***PingSlotInfoReq*** 指令并且收到服务器端的 ***PinSlotInfoAns*** 指令回复之后，就可以（MAY）使用新的参数切换回 Class B 模式。

该命令可以（MAY）和 **FHDRFOpt** 字段里的任何 MAC 命令进行连接，如 Class A 协议中的帧格式所述。

