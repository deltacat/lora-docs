# 第7章 重传避让

上行帧若出现如下情形：

- 需要网络或者应用服务器进行**确认或者应答**时，以及设备没有接收到确认或应答在进行重传；
- 同时某些外部事件（断电，无线电干扰，网络故障，地震……）会触发大量的（>100）的设备出现同一时间上行

这样可能会引发灾难性的、持久的、射频网络过载的情况。

> **注意**：这种上行帧的一个典型例子是 Join-Request，当发生网络中断时，一组终端将会复位 MAC 层。
> 这一组的终端将会开始广播 Join-Request 上行帧，只有当从网络中接收到 Join-Response 指令时才会停止。

对于这些数据帧的重传，RX2 时隙的末端和下一个上行帧的重传间隔应该（SHALL）是随机的，并且每个终端遵循不同的顺序（例如使用设备地址作为伪随机生成器的种子）。这些消息的发射占空比，要在当地的参数要求和如下的限定中取更严格的一个作为限定。

<table class="lora-table">
    <tr>
        <td>在上电或者复位后的第1个小时</td>
        <td>T0 &lt; t &lt; T0+1h</td>
        <td>发射时间 &lt; 36秒</td>
    </tr>
    <tr>
        <td>在接下来的10小时</td>
        <td>T0+1 &lt; t &lt; T0+11h</td>
        <td>发射时间 &lt; 36秒</td>
    </tr>
    <tr>
        <td>前11小时后的24小时</td>
        <td>T0+11+N &lt; t &lt; T0+35+N，N>=0</td>
        <td>发射时间 &lt; 8.7秒每24小时</td>
    </tr>
</table>
<i class="lora-table-name">表 17 : Join-request dutycycle limitations</i>

